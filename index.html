<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>استخراج نتائج الطلبة</title>

<style>
/* ===== إعدادات عامة ===== */
body {
  font-family: Arial, Tahoma, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 0;
}

/* ===== الصندوق الرئيسي ===== */
.box {
  max-width: 95%;
  margin: 20px auto;
  background: white;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* ===== العنوان ===== */
.box h3 {
  text-align: center;
  margin-bottom: 15px;
}

/* ===== الإدخال ===== */
input {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border-radius: 8px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

/* ===== الأزرار ===== */
button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  font-size: 16px;
  background: #0a7cff;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

button:active {
  background: #065fcc;
}

/* ===== النتيجة ===== */
#result {
  margin-top: 15px;
}

/* ===== جدول الدرجات ===== */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

td {
  border: 1px solid #ddd;
  padding: 10px;
  font-size: 15px;
}

/* ===== تحسين الهاتف ===== */
@media (max-width: 600px) {
  td {
    font-size: 14px;
    padding: 8px;
  }
}
</style>
</head>

<body>

<div class="box">
  <h3>استخراج نتائج الطالب</h3>

  <input type="number" id="civilId" placeholder="الرقم المدني">

  <button onclick="getResult()">عرض النتيجة</button>

  <div id="result"></div>
</div>

<script>
function getResult() {
  const civilId = document.getElementById("civilId").value.trim();

  if (!civilId) {
    document.getElementById("result").innerHTML =
      "<p style='color:red;text-align:center'>الرجاء إدخال الرقم المدني</p>";
    return;
  }

  const url =
    "https://script.google.com/macros/s/AKfycbwTtNStgKnx5sU_IG-S3LdQWpIWcUOjKrXa3U_40oKyBTfDglsiKE3FASU1j2sIo-cE/exec?civilId="
    + encodeURIComponent(civilId);

  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (!data.found) {
        document.getElementById("result").innerHTML =
          "<p style='color:red;text-align:center'>الرقم غير موجود</p>";
        return;
      }

      document.getElementById("result").innerHTML = `
        <p><b>اسم الطالب:</b> ${data.name}</p>
        <p><b>الصف:</b> ${data.grade}</p>

        <table>
          <tr><td>التربية الإسلامية</td><td>${data.islamic}</td></tr>
          <tr><td>اللغة العربية</td><td>${data.arabic}</td></tr>
          <tr><td>الرياضيات</td><td>${data.math}</td></tr>
          <tr><td>العلوم</td><td>${data.science}</td></tr>
          <tr><td>الدراسات الاجتماعية</td><td>${data.social}</td></tr>
          <tr><td>المهارات الحياتية</td><td>${data.life}</td></tr>
          <tr><td>تقنية المعلومات</td><td>${data.it}</td></tr>
          <tr><td>الرياضة المدرسية</td><td>${data.sport}</td></tr>
          <tr><td>الفنون التشكيلية</td><td>${data.art}</td></tr>
          <tr><td>المهارات الموسيقية</td><td>${data.music}</td></tr>
        </table>
      `;
    })
    .catch(err => {
      document.getElementById("result").innerHTML =
        "<p style='color:red;text-align:center'>حدث خطأ في الاتصال</p>";
      console.error(err);
    });
}
</script>

</body>
</html>
